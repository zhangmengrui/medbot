{% extends "base.html" %}

{% block content %}
<h1 class="title">
    {{_('Welcome')}}, {{ name }}!
</h1>

<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>

<a href="{{ url_for('chat') }}" class="button is-info is-large">
    {{_('Start a chat')}}
</a>
<a href="{{ url_for('scale') }}" class="button is-info is-large">
    {{_('Take a survey')}}
</a>

<h1 class="title is-4" style="margin-top: 2rem; font-weight: bold;">{{ _('Survey Results') }}</h1>

<table class="table is-striped is-bordered is-fullwidth">
    <thead>
        <tr>
            <th style="background-color: #9dc0f9; color: #333; font-weight: bold; text-align: center; padding: 0.5rem;">
                阳虚质</th>
            <th style="background-color: #9dc0f9; color: #333; font-weight: bold; text-align: center; padding: 0.5rem;">
                阴虚质</th>
            <th style="background-color: #9dc0f9; color: #333; font-weight: bold; text-align: center; padding: 0.5rem;">
                气虚质</th>
            <th style="background-color: #9dc0f9; color: #333; font-weight: bold; text-align: center; padding: 0.5rem;">
                痰湿质</th>
            <th style="background-color: #9dc0f9; color: #333; font-weight: bold; text-align: center; padding: 0.5rem;">
                湿热质</th>
            <th style="background-color: #9dc0f9; color: #333; font-weight: bold; text-align: center; padding: 0.5rem;">
                血瘀质</th>
            <th style="background-color: #9dc0f9; color: #333; font-weight: bold; text-align: center; padding: 0.5rem;">
                特禀质</th>
            <th style="background-color: #9dc0f9; color: #333; font-weight: bold; text-align: center; padding: 0.5rem;">
                气郁质</th>
            <th style="background-color: #9dc0f9; color: #333; font-weight: bold; text-align: center; padding: 0.5rem;">
                平和质</th>
            <th style="background-color: #9dc0f9; color: #333; font-weight: bold; text-align: center; padding: 0.5rem;">
                {{ _('Timestamp') }}</th>
            <th style="background-color: #9dc0f9; color: #333; font-weight: bold; text-align: center; padding: 0.5rem;">
                {{ _('Action') }}</th>
        </tr>
    </thead>
    <tbody>
        {% for entry in data %}
        <tr>
            <td style="text-align: center; vertical-align: middle; font-size: 0.7rem;">
                {{ entry.results_data['阳虚质']['status'] | default('未选择') }}</td>
            <td style="text-align: center; vertical-align: middle; font-size: 0.7rem;">
                {{ entry.results_data['阴虚质']['status'] | default('未选择') }}</td>
            <td style="text-align: center; vertical-align: middle; font-size: 0.7rem;">
                {{ entry.results_data['气虚质']['status'] | default('未选择') }}</td>
            <td style="text-align: center; vertical-align: middle; font-size: 0.7rem;">
                {{ entry.results_data['痰湿质']['status'] | default('未选择') }}</td>
            <td style="text-align: center; vertical-align: middle; font-size: 0.7rem;">
                {{ entry.results_data['湿热质']['status'] | default('未选择') }}</td>
            <td style="text-align: center; vertical-align: middle; font-size: 0.7rem;">
                {{ entry.results_data['血瘀质']['status'] | default('未选择') }}</td>
            <td style="text-align: center; vertical-align: middle; font-size: 0.7rem;">
                {{ entry.results_data['特禀质']['status'] | default('未选择') }}</td>
            <td style="text-align: center; vertical-align: middle; font-size: 0.7rem;">
                {{ entry.results_data['气郁质']['status'] | default('未选择') }}</td>
            <td style="text-align: center; vertical-align: middle; font-size: 0.7rem;">
                {{ entry.results_data['平和质']['status'] | default('未选择') }}</td>
            <td style="text-align: center; vertical-align: middle; font-size: 0.7rem;">
                {{ entry.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
            <td style="text-align: center; vertical-align: middle;">
                <a href="{{ url_for('scale', id=entry.id) }}" class="button is-small is-info">{{ _('Details') }}</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}